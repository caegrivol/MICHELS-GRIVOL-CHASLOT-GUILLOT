<?xml version="1.0" encoding="UTF-8"?>

<project name="MICHELS-GRIVOL-CHASLOT-GUILLOT" default="checkJUnit" basedir=".">
       <description>Projet MEDEV TP6</description>
 
<!-- Définition des chemins --> 
<property name="src.dir" value="src"/>
<property name="bin.dir" value="bin"/>
<property name="lib.dir" value="lib"/>
<property name="test.dir" location="test\tp3"/>        
<property name="release.dir" location="release"/>

<!-- Définition des répertoires -->
<target name="Initialisation" description="Création des répertoires">
    <mkdir dir="${build.dir}"/>
    <mkdir dir="${jdoc.dir}"/>
    <mkdir dir="${release.dir}"/>
</target>

<!-- *********** -->
<!-- Compilation -->
<!-- *********** -->

<!-- Definition du classpath du projet -->

<path id="projet.classpath">
<fileset dir="${lib.dir}">
<include name="*.jar"/>
</fileset>
<pathelement location="${bin.dir}" />
</path>

<!-- Compilation des classes du projet -->
<target name="compile" description="Compilation des classes">
<javac srcdir="${src.dir}"
destdir="${bin.dir}"
debug="on"
optimize="off"
deprecation="on">

<classpath refid="projet.classpath"/>
</javac>
</target>
 <echo message="Classes compilées!"/>
 
 <!-- Compilation des tests du projet -->
<target name="compileTest" description="Compilation des classes">
<javac srcdir="${test.dir}"
destdir="${bin.dir}"
debug="on"
optimize="off"
deprecation="on">
<classpath refid="projet.classpath"/>
</javac>
</target>

 <echo message="Tests compilés!"/>
 
	  
<!-- JUnit -->
       <target name="checkJUnit" description="Tester le téléchargement de JUnit">
           <echo message="Test de la présence de JUnit..."/>
           <condition property="junit.exists">
                      <available file="junit-4.4.jar" type="file"/>
           </condition>
       </target>
       
       <target name="telechargementJUnit" description="Téléchargement de JUnit" depends="checkJUnit" unless="junit.exists">
       		<echo message="Téléchargement de JUnit..."/>
       		<get src="http://central.maven.org/maven2/junit/junit/4.4/junit-4.4.jar" dest="."/>
           	<echo message="Fait!"/>
       </target>
	   
   
<!-- Javadoc -->
<target name="javadoc" description="Création de la javadoc">
 <javadoc sourcepath="${src.dir}" destdir="${release.dir}"/>
  </target>

<!-- Sonarqube -->
<target name="sonar">
  <exec executable="cmd">
    <arg value="C:\sonarqube\sonar-runner-2.4\bin\sonar-runner.bat"/>
  </exec>
</target>

</project>